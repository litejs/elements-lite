!function(x,m,h){function G(a,b,d){for(var g=[],q=a.firstChild,c=H(b);b=q;){if(c(b)){if(d)return b;g.push(b)}for(q=b.firstChild||b.nextSibling;!q&&(b=b.parentNode)!==a;)q=b.nextSibling}return d?null:g}function H(a){return I[a]||(I[a]=Function("_,v,a,b","return "+a.split(Y).map(function(a){var d,g,c=["_&&_.nodeType==1"],f=a.replace(Z,function(a,b,c,q){g=q+b.length;d=b.trim();return""});(a=a.slice(g).replace(J,function(a,b,d,g,f,e,X){c.push("((v='"+(g||(X?e.slice(1,-1):e)||"").replace(/'/g,"\\'")+"'),(a='"+
d+"'),1)",K[":"==b?d:b]||"(a=_.getAttribute(a))"+(f?"&&"+K[f]:e?"==v":""));return""}))&&"*"!=a&&(c[0]+="&&_.nodeName=='"+a.toUpperCase()+"'");f&&c.push("+"==d?"(a=_.previousSibling)":"(a=_.parentNode)",(d?"a.matches&&a.matches('":"a.closest&&a.closest('")+f+"')");return c.join("&&")}).join("||")))}function f(a,b,d){var g={};a=a.replace(J,function(a,b,d,c,f,e,k){e=k?e.slice(1,-1):e||d;g[b="."==b?(f="~","class"):"#"==b?"id":d]=f&&g[b]?"^"==f?e+g[b]:g[b]+("~"==f?" ":"")+e:e;return""})||"div";a=(z[a]||
(z[a]=m.createElement(a))).cloneNode(!0).attr(g);return d||!b?a:("object"==typeof b?k:v).call(a,b)}function v(a,b){var d,g=0,c=typeof a;if(a){if("string"==c||"number"==c)a=m.createTextNode(a);else if(!("nodeType"in a)&&"length"in a){c=a.length;for(d=m.createDocumentFragment();g<c;)v.call(d,a[g++]);a=d}a.nodeType&&(c=this.insertBefore?this:this[this.length-1],c.insertBefore(a,(!0===b?c.firstChild:"number"==typeof b?c.childNodes[0>b?c.childNodes.length-b-2:b]:b)||null))}return this}function y(a){return-1<
this.className.split(/\s+/).indexOf(a)}function A(a){var b=this.className;b&&(a=y.call(this,a)?b:b+" "+a);b!=a&&(this.className=a);return this}function L(a){y.call(this,a)&&(this.className=(" "+this.className+" ").replace(" "+a+" "," ").trim());return this}function M(a,b){1==arguments.length&&(b=!y.call(this,a));return(b?A:L).call(this,a),b}function N(){var a;this.emit&&this.emit("kill");this.parentNode&&this.parentNode.removeChild(this);Event.removeAll&&Event.removeAll(this);this.empty&&this.empty();
(a=this.attr&&this.attr("data-scope"))&&delete p[a];return this}function k(a,b){var d;if(a&&a.constructor==Object){for(b in a)k.call(this,b,a[b]);return this}d=this.getAttribute(a);if(1==arguments.length)return d;!aa||"id"!=a&&"name"!=a&&"checked"!=a?"class"==a?A.call(this,b):b||0===b?d!=b&&this.setAttribute(a,b):d&&this.removeAttribute(a):this.mergeAttributes(O("<INPUT "+a+'="'+b+'">'),!1)}function p(a,b,d){if(d=p[k.call(a,"data-scope")])return d;b&&!0!==b||(d=(d=B.call(a,"[data-scope]"))&&p[k.call(d,
"data-scope")]||P);b&&(k.call(a,"data-scope",++Q),d=p[Q]=Object.create(b=d||b),d._super=b);return d}function R(a,b){var d,c,f;if(1!=this.nodeType)return this;a=p[k.call(this,"data-scope")]||a||(d=B.call(this,"[data-scope]"))&&p[k.call(d,"data-scope")]||P;if(d=!b&&k.call(this,"data-bind")){c=d;f="data b r->data&&("+d.replace(ba,function(a,b,d){return r[b]?(ca.call(r[b],"once")&&(c=c.replace(a,"")),"(r=b['"+b+"'].call(this,"+(r[b].raw?"data,'"+d+"'":d)+")||r),"):"this.attr('"+b+"',"+d+"),"})+"r)";d!=
c&&k.call(this,"data-bind",c);try{if(Fn(f,"data").call(this,a,r))return this}catch(e){return e.message+=" in binding: "+d,console.error(e),this}}for(d=this.firstChild;d;d=c)c=d.nextSibling,R.call(d,a);C&&"SELECT"==this.nodeName&&this.parentNode.insertBefore(this,this);return this}function B(a){for(var b=this;b;b=b.parentNode)if(b.matches&&b.matches(a))return b;return null}function t(a){w.push.apply(this,da(a))}function S(a){function b(a,d,m,n,l,h){for(l=d.length;l<=e[0];)e.shift(),c=c.plugin?c.plugin.done():
c.parentNode||c[0].parentNode;m?f.plugins[n]?(c=(new f.plugins[n](c,h)).el,e.unshift(l)):c.append(a):(n&&(c=f(n,0,1).to(c),e.unshift(l)),h&&(l=h.charAt(0),n=h.slice(1),">"==l?(d+" "+n).replace(T,b):"|"==l||"\\"==l?c.append(n):"/"!=l&&("&"!=l&&(n=("INPUT"==c.tagName?"val":"txt")+":_('"+h.replace(/'/g,"\\'")+"').format(data)"),l=k.call(c,"data-bind"),k.call(c,"data-bind",(l?l+";":"")+n))))}var d=m.createDocumentFragment(),c=d,e=[-1];a.replace(T,b);d=d.childNodes;return 1==d.length?d[0]:d}function D(a,
b){this.name=b;this.parent=a;this.el=f("div");this.el.plugin=this;return this}function e(a,b){b=e[E(b)||u];return b[a]||b[a=a.slice(a.indexOf(":")+1)||a]||a}function E(a){return a&&(e[a=(""+a).toLowerCase()]||e[a=a.split("-")[0]])&&a}function U(a){(a=E(a))&&u!=a&&(e[u=e.current=a]=e[u]||{});return u}function V(a,b){-1==e.list.indexOf(a)&&e.list.push(a);Object.merge(e[a]||(e[a]={}),b);u||U(a)}var u,C=!+"\v1",aa=C&&8>(m.documentMode|0),ca=Object[h].hasOwnProperty,w=[],da=Function[h].call.bind(w.slice),
W=m.body,O=m.createElement,F="textContent"in W?"textContent":"innerText",z=f.cache={},Q=0,P=f.data={window:x,_:e},c=(x.HTMLElement||x.Element||f)[h],T=/^([ \t]*)(@?)((?:("|')(?:\\?.)*?\4|[-\w\:.#\[\]=])*)[ \t]*(.*?)$/gm,ba=/[;\s]*(\w+)(?:\s*\:((?:(["'\/])(?:\\?.)*?\3|[^;])*))?/g,r=f.bindings={"class":function(a,b){M.call(this,a,2>arguments.length||b)},css:function(a,b){this.style[a.camelCase()]=b},data:function(a,b){this.attr("data-"+a,b)},html:function(a){this.innerHTML=a}},J=/([.#:[])([-\w]+)(?:\((.+?)\)|([~^$*|]?)=(("|')(?:\\?.)*?\6|[-\w]+))?]?/g,
Z=/([\s>+]*)(?:("|')(?:\\?.)*?\2|\(.+?\)|[^\s+>])+$/,Y=/\s*,\s*(?=(?:[^'"()]|"(?:\\?.)*?"|'(?:\\?.)*?'|\(.+?\))+$)/,I={},K={"first-child":"(a=_.parentNode)&&a.firstChild==_","last-child":"(a=_.parentNode)&&a.lastChild==_",".":"~_.className.split(/\\s+/).indexOf(a)","#":"_.id==a","^":"a.indexOf(v)==0","|":"a.split('-')[0]==v",$:"a.slice(-v.length)==v","~":"~a.split(/\\s+/).indexOf(v)","*":"~a.indexOf(v)"};x.El=f;c.append=v;c.after=function(a,b){v.call(a.parentNode,this,b?a:a.nextSibling);return this};
c.to=function(a,b){v.call(a,this,b);return this};c.hasClass=y;c.addClass=A;c.rmClass=L;c.toggleClass=M;c.empty=function(){for(var a;a=this.firstChild;)N.call(a);return this};c.kill=N;c.on=function(a,b){Event.add(this,a,b);return this};c.non=function(a,b){Event.remove(this,a,b);return this};c.emit=function(){Event.Emitter.emit.apply(this,arguments)};c.attr=k;f.scope=p;c.render=R;c.txt=r.txt=function(a){return arguments.length&&this[F]!=a?this[F]=a:this[F]};c.val=r.val=function(a){var b=this,c=b.type,
e=b.options;if(arguments.length)return b.value=a;if("select-multiple"==c){a=[];for(c=0;b=e[c++];)!b.selected||b.disabled||b.parentNode.disabled||a.push(b.value);return a}return"checkbox"==c||"radio"==c?b.checked?"on"==b.value||b.value:!1:e&&e[b.selectedIndex]&&e[b.selectedIndex].value||b.value};c.matches||(c.matches=function(a){return!!H(a)(this)});c.closest||(c.closest=B);c.find=!C&&c.querySelector||function(a){return G(this,a,!0)};c.findAll=c.querySelectorAll?function(a){return new t(this.querySelectorAll(a))}:
function(a){return new t(G(this,a))};f.wrap=t;t[h]=Object.keys(c).reduce(function(a,b){function d(){for(var a,e=0,f=this.length;e<f;)if(a=c[b].apply(this[e++],arguments),d.first&&a)return a;return d.first?null:this}a[b]=d;return a},w);w.find.first=1;w.cloneNode=function(a){return new t(this.map(function(b){return b.cloneNode(a)}))};c==f[h]&&(m.createElement=function(a){return Object.merge(O(a),c)},Object.merge(W,c));f[h]=c;f.get=function(a){"string"==typeof a&&(a=m.getElementById(a));return a&&a.to?
a:Object.merge(a,c)};D[h]={_done:function(){var a=1<this.el.childNodes.length?new t(this.el.childNodes):this.el.firstChild;this.el.plugin=this.el=this.parent=null;return a},done:function(){var a=this.parent;z[this.name]=this._done();return a}};f.plugins={template:D};f.create=f.tpl=S;f.include=function(a,b,c){b=f.get(a);(new D(null,a)).el.append(S(b.innerHTML)).plugin.done();b.kill()};f.i18n=e;e.list=[];e.get=E;e.use=U;e.add=V;e.def=function(a){Object.each(a,function(b,c){V(c,a)})};String[h].lang=
function(a){return e(this,a)}}(window,document,"prototype");
