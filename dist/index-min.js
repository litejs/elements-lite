/*
    MIT License
*/
!function(u,h,v){function f(a,b,c){var d,e={};a=a.replace(E,function(a,b,c,d,f){e["."==b?(e[b="class"]&&(c=e[b]+" "+c),b):"#"==b?"id":c]=f?d.slice(1,-1):d||c;return""})||"div";d=(q[a]||(q[a]=h.createElement(a))).cloneNode(!0).set(e);return c?(m[a]&&d.setAttribute("data-call",a),d):m[a]&&m[a].call(d,b)||d.set(b)}function n(a,b){var c,d=0,e=typeof a;if(a){if("string"==e||"number"==e)a=f.text(a);else if(!("nodeType"in a)&&"length"in a){e=a.length;for(c=h.createDocumentFragment();d<e;)n.call(c,a[d++]);
a=c}a.nodeType&&this.insertBefore(a,(!0===b?this.firstChild:"number"==typeof b?this.childNodes[0>b?this.childNodes.length-b-2:b]:b)||null);a.appendHook&&a.appendHook()}return this}function w(a){return-1<(" "+this.className+" ").indexOf(" "+a+" ")}function x(a){this.className+=this.className?w.call(this,a)?"":" "+a:a;return this}function F(a){this.className=(" "+this.className+" ").replace(" "+a+" "," ").trim();return this}function G(a,b){1==arguments.length&&(b=!w.call(this,a));return(b?x:F).call(this,
a),b}function H(){this.parentNode&&this.parentNode.removeChild(this);Event.removeAll&&Event.removeAll(this);this.killHook&&this.killHook();this.empty&&this.empty();return this}function y(a,b){var c=this;if(1==arguments.length){if(a&&a.constructor===Object){Object.each(a,function(a,b){y.call(c,b,a)});return}return c.getAttribute(a)}"id"!=a&&"name"!=a&&"type"!=a||"\v"!="v"?c.setAttribute(a,b):c.mergeAttributes(I("<INPUT "+a+'="'+b+'">'),!1)}function z(a,b){var c,d=this;if(c=!b&&d.getAttribute("data-call"))d.removeAttribute("data-call"),
m[c].call(d);if(c=!b&&d.getAttribute("data-bind"))if(d.getAttribute("lang"),"{"==c.charAt(0)&&(c='txt:"'+c.replace(/"/g,'\\"')+'"'),c="n d p r->d&&("+c.replace(O,"(p['$1']?(r=p['$1'](n,d,$2)||r):(n['$1']=$2.format(d))),")+"r)",c.fn()(d,a,P))return d;for(d=d.firstChild;d;d=d.nextSibling)1==d.nodeType&&z.call(d,a);return this}function J(a,b,c){var d=0,e=[],f=["_"];b=b.replace(E,function(a,b,c,d){f.push("."==b?"(' '+_.className+' ').indexOf(' "+c+" ')>-1":"#"==b?"_.id=='"+c+"'":"_.getAttribute('"+c+
"')"+(d?"=='"+d+"'":""));return""})||"*";b=a.getElementsByTagName(b);for(var g=Fn(f.join("&&"));a=b[d++];)if(g(a)){if(c)return a;e.push(a)}return c?null:e}function r(a){this._nodes=a}function A(a,b){if(a)for(b in e)a[b]=e[b];return a}function B(a,b,c){q[a]="string"==typeof b?f(b):b;c&&(m[a]=c)}function t(a){function b(a,c,g,h,k,l){for(k=c.length;k<=e[0];)e.shift(),d=d.plugin?d.plugin.done():d.parentNode;g?t.plugins[h]?(d=(new t.plugins[h](d,l)).el,e.unshift(k)):d.append(f.text("text"==h?l:a)):(h&&
(d=f(h,0,1).to(d),e.unshift(k)),l&&(k=l.charAt(0),">"==k?(c+" "+l.slice(1)).replace(K,b):"="==k?d.set({"data-bind":l.slice(1)}):d.append(l.replace(/\\([=>:])/g,"$1"))))}var c=h.createDocumentFragment(),d=c,e=[-1];a.replace(K,b);c=c.childNodes;if(1==c.length)return c[0];e=[];for(d=c.length;d--;)e[d]=c[d];return e}function C(a,b){this.name=b;this.parent=a;this.el=f("div");this.el.plugin=this;return this}function g(a,b){return g[b?D(b):p][a]||a}function D(a){if(!a)return p;a=(a||"").toLowerCase();return g[a]?
a:(a=a.split("-")[0],g[a])?a:p}function L(a,b){Object.merge(g[a]||(g[a]={}),b)}var p,M=h.body,I=h.createElement,N="textContent"in M?"textContent":"innerText",q={},m={},e=(u.HTMLElement||u.Element||f)[v],E=/([.#:[])([-\w]+)(?:=((["'\/])(?:\\?.)*?\4|[-\w]+)])?]?/g,K=/^([ \t]*)(@?)((?:(["'\/])(?:\\?.)*?\4|[-\w\:.#\[\]=])+)[ \t]*(.*)$/gm,O=/[;\s]*(\w+)(?:\s*\:((?:(["'\/])(?:\\?.)*?\3|[-,\s\w])*))?/g,P=f.bindings={"class":function(a,b,c,d){G.call(a,c,d.fn("_")(b))},html:function(a,b,c){a.innerHTML=c.format(b)},
txt:function(a,b,c){a.txt(c.format(b))},val:function(a,b,c){a.val(c.format(b))}};u.El=f;e.append=n;e.after=function(a,b){n.call(a.parentNode,this,b?a:a.nextSibling);return this};e.to=function(a,b){n.call(a,this,b);return this};e.hasClass=w;e.addClass=x;e.rmClass=F;e.toggleClass=G;e.empty=function(){for(var a;a=this.firstChild;)H.call(a);return this};e.kill=H;e.on=function(a,b){Event.add(this,a,b);return this};e.non=function(a,b){Event.remove(this,a,b);return this};e.attr=y;e.set=function(a,b,c){if(a)if("object"==
typeof a)for(b in a)c=a[b],"class"==b?x.call(this,c):"string"==typeof c?y.call(this,b,c):c||this.removeAttribute(b);else n.call(this,a);return this};e.render=z;e.txt=function(a){return arguments.length?this[N]=a:this[N]};e.val=function(a){var b=this,c=b.type,d=b.options;if(arguments.length)return b.value=a;if("select-multiple"==c){a=[];for(c=0;b=d[c++];)!b.selected||b.disabled||b.parentNode.disabled||a.push(b.value);return a}return"checkbox"!=c&&"radio"!=c||b.checked?b.value||options&&options[b.selectedIndex].value||
"on":""};e.find="\v"!=="v"&&e.querySelector||function(a){return J(this,a,!0)};e.findAll=e.querySelectorAll?function(a){return new r(this.querySelectorAll(a))}:function(a){return new r(J(this,a))};f.wrap=r;r.prototype=Object.keys(e).reduce(function(a,b){a[b]=function(){for(var a=this._nodes,d=0,f=a.length;d<f;)e[b].apply(a[d++],arguments);return this};return a},{});e===f[v]&&(h.createElement=function(a){return A(I(a))},A(M));f[v]=e;f.get=function(a){"string"==typeof a&&(a=h.getElementById(a));return a&&
a.to?a:A(a)};B._el=q;B._fn=m;f.cache=B;f.text=function(a){return h.createTextNode(a)};C.prototype.done=function(){f.cache(this.name,this.el.removeChild(this.el.firstChild),z);this.el.plugin=null;return this.parent};t.plugins={template:C};f.create=f.tpl=function(a){return t(a).render()};f.include=function(a,b,c){b=f.get(a);(new C(null,a)).el.append(f.tpl(b.innerHTML)).plugin.done();b.kill()};f.i18n=g;g.get=D;g.use=function(a){a=D(a);p!=(p=a)&&(g[a]=g[a]||{});return h.documentElement.lang=a};g.add=
L;g.def=function(a){Object.each(a,function(b,c){L(c,a)})}}(window,document,"prototype");
