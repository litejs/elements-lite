!function(w,g,x){function D(a,b,d){for(var l=[],f=a.firstChild,c=E(b);b=f;){if(c(b)){if(d)return b;l.push(b)}for(f=b.firstChild||b.nextSibling;!f&&(b=b.parentNode)!==a;)f=b.nextSibling}return d?null:l}function E(a){return F[a]||(F[a]=Function("_,v,a,b","return "+a.split(R).map(function(a){var d,l,f=["_&&_.nodeType===1"],c=a.replace(S,function(a,b,f,c){l=c+b.length;d=b.trim();return""});(a=a.slice(l).replace(G,function(a,b,d,l,c,e,k){f.push("((v='"+(l||(k?e.slice(1,-1):e)||"").replace(/'/g,"\\'")+
"'),(a='"+d+"'),1)",H[":"==b?d:b]||"(a=_.getAttribute(a))"+(c?"&&"+H[c]:e?"==v":""));return""}))&&"*"!=a&&(f[0]+="&&_.nodeName=='"+a.toUpperCase()+"'");c&&f.push("+"==d?"(a=_.previousSibling)":"(a=_.parentNode)",(d?"a.matches&&a.matches('":"a.closest&&a.closest('")+c+"')");return f.join("&&")}).join("||")))}function e(a,b,d){var l,c={};a=a.replace(G,function(a,b,d,l,e,h,g){h=g?h.slice(1,-1):h||d;c[b="."==b?(e="~","className"):"#"==b?"id":d]=e&&c[b]?"^"==e?h+c[b]:c[b]+("~"==e?" ":"")+h:h;return""})||
"div";l=(r[a]||(r[a]=g.createElement(a))).cloneNode(!0).attr(c);return d?(m[a]&&l.attr("data-call",a),l):(m[a]||("object"==typeof b?y:q)).call(l,b)}function q(a,b){var d,c=0,f=typeof a;if(a){if("string"==f||"number"==f)a=e.text(a);else if(!("nodeType"in a)&&"length"in a){f=a.length;for(d=g.createDocumentFragment();c<f;)q.call(d,a[c++]);a=d}a.nodeType&&this.insertBefore(a,(!0===b?this.firstChild:"number"==typeof b?this.childNodes[0>b?this.childNodes.length-b-2:b]:b)||null);a.appendHook&&a.appendHook()}return this}
function z(a){return-1<this.className.split(/\s+/).indexOf(a)}function I(a){this.className+=this.className?z.call(this,a)?"":" "+a:a;return this}function J(a){this.className=(" "+this.className+" ").replace(" "+a+" "," ").trim();return this}function K(a,b){1==arguments.length&&(b=!z.call(this,a));return(b?I:J).call(this,a),b}function L(){this.parentNode&&this.parentNode.removeChild(this);Event.removeAll&&Event.removeAll(this);this.killHook&&this.killHook();this.empty&&this.empty();return this}function y(a,
b){var d=this;if(1==arguments.length)return a&&a.constructor===Object?(Object.each(a,function(a,b){y.call(d,b,a)}),d):d.getAttribute(a);"id"!=a&&"name"!=a&&"type"!=a||"\v"!="v"?b?d.setAttribute(a,b):d.removeAttribute(a):d.mergeAttributes(M("<INPUT "+a+'="'+b+'">'),!1)}function t(a,b){var d,c,e,k=this;if(d=k.attr("data-data"))k.removeAttribute("data-call"),m[d].call(k);if(d=!b&&k.attr("data-el-data"))k.attr("data-el-data"),m[d].call(k);if(d=!b&&k.attr("data-bind"))if(e=k.attr("lang")||e,c=d,e="n d b r->d&&("+
d.replace(T,function(a,b,d){U.call(u[b]||t,"once")&&(c=c.split(a).join(""));return u[b]?"(r=b."+b+"(n,d,"+(u[b].raw?"'"+d+"'":d)+")||r),":"n.attr('"+b+"',"+d+".format(d)),"})+"r)",d!=c&&k.attr("data-bind",c),Fn(e)(k,a,u))return k;for(k=k.firstChild;k;k=k.nextSibling)1==k.nodeType&&t.call(k,a);return this}function v(a){this._nodes=a}function A(a,b,d){r[a]="string"==typeof b?e(b):b;d&&(m[a]=d)}function V(a){function b(a,d,h,g,n,m){for(n=d.length;n<=f[0];)f.shift(),c=c.plugin?c.plugin.done():c.parentNode;
h?e.plugins[g]?(c=(new e.plugins[g](c,m)).el,f.unshift(n)):c.append(a):(g&&(c=e(g,0,1).to(c),f.unshift(n)),m&&(n=m.charAt(0),g=m.slice(1),">"==n?(d+" "+g).replace(N,b):"|"==n||"\\"==n?c.append(g):"/"!=n&&("&"!=n&&(g="txt:i18n('"+m.replace(/'/g,"\\'")+"').format(d)"),c.attr("data-bind",g))))}var d=g.createDocumentFragment(),c=d,f=[-1];a.replace(N,b);d=d.childNodes;return 1==d.length?d[0]:d}function B(a,b){this.name=b;this.parent=a;this.el=e("div");this.el.plugin=this;return this}function h(a,b){b=
h[C(b)];return b[a]||b[a=a.slice(a.indexOf(":")+1)||a]||a}function C(a){return a&&(h[a=a.toLowerCase()]||h[a=a.split("-")[0]])?a:p}function O(a,b){Object.merge(h[a]||(h[a]={}),b)}var p,U=Object.prototype.hasOwnProperty,P=g.body,M=g.createElement,Q="textContent"in P?"textContent":"innerText",r={},m={},c=(w.HTMLElement||w.Element||e)[x],N=/^([ \t]*)(@?)((?:("|')(?:\\?.)*?\4|[-\w\:.#\[\]=])*)[ \t]*(.*)$/gm,T=/[;\s]*(\w+)(?:\s*\:((?:(["'\/])(?:\\?.)*?\3|[^;])*))?/g,u=e.bindings={"class":function(a,b,
d,c){K.call(a,d,c.fn("_")(b))},html:function(a,b,d){a.innerHTML=d.format(b)},txt:function(a,b,d){a.txt(d.format(b))},val:function(a,b,d){a.val(d.format(b))}},G=/([.#:[])([-\w]+)(?:\((.+?)\)|([~^$*|]?)=(("|')(?:\\?.)*?\6|[-\w]+))?]?/g,S=/([\s>+]*)(?:("|')(?:\\?.)*?\2|\(.+?\)|[^\s+>])+$/,R=/\s*,\s*(?=(?:[^'"()]|"(?:\\?.)*?"|'(?:\\?.)*?'|\(.+?\))+$)/,F={},H={"first-child":"(a=_.parentNode)&&a.firstChild==_","last-child":"(a=_.parentNode)&&a.lastChild==_",".":"~_.className.split(/\\s+/).indexOf(a)","#":"_.id==a",
"^":"a.indexOf(v)==0","|":"a.split('-')[0]==v",$:"a.slice(-v.length)==v","~":"~a.split(/\\s+/).indexOf(v)","*":"~a.indexOf(v)"};w.El=e;c.append=q;c.after=function(a,b){q.call(a.parentNode,this,b?a:a.nextSibling);return this};c.to=function(a,b){q.call(a,this,b);return this};c.hasClass=z;c.addClass=I;c.rmClass=J;c.toggleClass=K;c.empty=function(){for(var a;a=this.firstChild;)L.call(a);return this};c.kill=L;c.on=function(a,b){Event.add(this,a,b);return this};c.non=function(a,b){Event.remove(this,a,b);
return this};c.attr=y;c.render=t;c.txt=function(a){return arguments.length?this[Q]=a:this[Q]};c.val=function(a){var b=this,d=b.type,c=b.options;if(arguments.length)return b.value=a;if("select-multiple"==d){a=[];for(d=0;b=c[d++];)!b.selected||b.disabled||b.parentNode.disabled||a.push(b.value);return a}return"checkbox"!=d&&"radio"!=d||b.checked?b.value||options&&options[b.selectedIndex].value||"on":""};c.matches||(c.matches=function(a){return!!E(a)(this)});c.closest||(c.closest=function(a){for(var b=
this;b;b=b.parentNode)if(b.matches&&b.matches(a))return b;return null});c.find="\v"!=="v"&&c.querySelector||function(a){return D(this,a,!0)};c.findAll=c.querySelectorAll?function(a){return new v(this.querySelectorAll(a))}:function(a){return new v(D(this,a))};e.wrap=v;v.prototype=Object.keys(c).reduce(function(a,b){a[b]=function(){for(var a=this._nodes,e=0,f=a.length;e<f;)c[b].apply(a[e++],arguments);return this};return a},{});c===e[x]&&(g.createElement=function(a){return Object.merge(M(a),c)},Object.merge(P,
c));e[x]=c;e.get=function(a){"string"==typeof a&&(a=g.getElementById(a));return a&&a.to?a:Object.merge(a,c)};A._el=r;A._fn=m;e.cache=A;e.text=function(a){return g.createTextNode(a)};B.prototype.done=function(){e.cache(this.name,this.el.removeChild(this.el.firstChild),t);this.el.plugin=null;return this.parent};e.plugins={template:B};e.create=e.tpl=function(a){return V(a).render()};e.include=function(a,b,c){b=e.get(a);(new B(null,a)).el.append(e.tpl(b.innerHTML)).plugin.done();b.kill()};e.i18n=h;h.get=
C;h.use=function(a){p!=(p=C(a))&&(h[p]=h[p]||{});return g.documentElement.lang=p};h.add=O;h.def=function(a){Object.each(a,function(b,c){O(c,a)})}}(window,document,"prototype");
