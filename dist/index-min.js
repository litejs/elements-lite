/*
    MIT License
*/
!function(w,g,x){function f(a,b,c){var d,l={};a=a.replace(G,function(a,b,c,d,e,f){l["."==b?(l[b="class"]&&(c=l[b]+" "+c),b):"#"==b?"id":c]=f?e.slice(1,-1):e||c;return""})||"div";d=(t[a]||(t[a]=g.createElement(a))).cloneNode(!0).set(l);return c?(p[a]&&d.setAttribute("data-call",a),d):p[a]&&p[a].call(d,b)||d.set(b)}function q(a,b){var c,d=0,l=typeof a;if(a){if("string"==l||"number"==l)a=f.text(a);else if(!("nodeType"in a)&&"length"in a){l=a.length;for(c=g.createDocumentFragment();d<l;)q.call(c,a[d++]);
a=c}a.nodeType&&this.insertBefore(a,(!0===b?this.firstChild:"number"==typeof b?this.childNodes[0>b?this.childNodes.length-b-2:b]:b)||null);a.appendHook&&a.appendHook()}return this}function y(a){return-1<(" "+this.className+" ").indexOf(" "+a+" ")}function z(a){this.className+=this.className?y.call(this,a)?"":" "+a:a;return this}function H(a){this.className=(" "+this.className+" ").replace(" "+a+" "," ").trim();return this}function I(a,b){1==arguments.length&&(b=!y.call(this,a));return(b?z:H).call(this,
a),b}function J(){this.parentNode&&this.parentNode.removeChild(this);Event.removeAll&&Event.removeAll(this);this.killHook&&this.killHook();this.empty&&this.empty();return this}function A(a,b){var c=this;if(1==arguments.length){if(a&&a.constructor===Object){Object.each(a,function(a,b){A.call(c,b,a)});return}return c.getAttribute(a)}"id"!=a&&"name"!=a&&"type"!=a||"\v"!="v"?c.setAttribute(a,b):c.mergeAttributes(K("<INPUT "+a+'="'+b+'">'),!1)}function B(a,b){var c,d=this;if(c=!b&&d.getAttribute("data-call"))d.removeAttribute("data-call"),
p[c].call(d);if(c=!b&&d.getAttribute("data-bind"))if(d.getAttribute("lang"),"{"==c.charAt(0)&&(c='txt:"'+c.replace(/"/g,'\\"')+'"'),c="n d p r->d&&("+c.replace(S,"(p['$1']?(r=p['$1'](n,d,$2)||r):(n['$1']=$2.format(d))),")+"r)",Fn(c)(d,a,T))return d;for(d=d.firstChild;d;d=d.nextSibling)1==d.nodeType&&B.call(d,a);return this}function L(a,b,c){var d=0,l=[];a=a.getElementsByTagName("*");for(var e=M(b.split(/\s*,\s*/).map(function(a){return"_.matches('"+a+"')"}).join("||"));b=a[d++];)if(e(b)){if(c)return b;
l.push(b)}return c?null:l}function U(a){var b=["_"];(a=a.replace(G,function(a,d,e,f,k,h,m){h&&(k=k.slice(1,-1));k&&(m=k.length,k=k.replace(/'/g,"\\'"));b.push("."==d?"(' '+_.className+' ').indexOf(' "+e+" ')>-1":"#"==d?"_.id=='"+e+"'":":"==d&&V[e]||"(a=_.getAttribute('"+e+"'))"+(!f&&k?"=='"+k+"'":""));f&&b.push("^"==f?"a.slice(0,"+m+")=='"+k+"'":"|"==f?"a.split('-')[0]=='"+k+"'":"$"==f?"a.slice(-"+m+")=='"+k+"'":"~"==f?"(' '+a+' ').indexOf(' "+k+" ')>-1":"a.indexOf('"+k+"')>-1");return""}))&&"*"!=
a&&b.unshift("_.nodeName=='"+a.toUpperCase()+"'");return b.join("&&")}function M(a){return N[a]||(N[a]=Function("_,a","return "+a))}function u(a){this._nodes=a}function C(a,b){if(a)for(b in e)a[b]=e[b];return a}function D(a,b,c){t[a]="string"==typeof b?f(b):b;c&&(p[a]=c)}function v(a){function b(a,c,h,m,g,n){for(g=c.length;g<=e[0];)e.shift(),d=d.plugin?d.plugin.done():d.parentNode;h?v.plugins[m]?(d=(new v.plugins[m](d,n)).el,e.unshift(g)):d.append(f.text("text"==m?n:a)):(m&&(d=f(m,0,1).to(d),e.unshift(g)),
n&&(g=n.charAt(0),">"==g?(c+" "+n.slice(1)).replace(O,b):"="==g?d.set({"data-bind":n.slice(1)}):d.append(n.replace(/\\([=>:])/g,"$1"))))}var c=g.createDocumentFragment(),d=c,e=[-1];a.replace(O,b);c=c.childNodes;if(1==c.length)return c[0];e=[];for(d=c.length;d--;)e[d]=c[d];return e}function E(a,b){this.name=b;this.parent=a;this.el=f("div");this.el.plugin=this;return this}function h(a,b){return h[b?F(b):r][a]||a}function F(a){if(!a)return r;a=(a||"").toLowerCase();return h[a]?a:(a=a.split("-")[0],h[a])?
a:r}function P(a,b){Object.merge(h[a]||(h[a]={}),b)}var r,Q=g.body,K=g.createElement,R="textContent"in Q?"textContent":"innerText",t={},p={},e=(w.HTMLElement||w.Element||f)[x],N={},G=/([.#:[])([-\w]+)(?:([~^$*|]?)=((["'\/])(?:\\?.)*?\5|[-\w]+)])?]?/g,W=/(\s*[>+]?\s*)((["'\/])(?:\\?.)*?\2|[^\s+>])+$/,V={empty:"!_.hasChildNodes()","first-child":"_.parentNode&&_.parentNode.firstChild==_","last-child":"_.parentNode&&_.parentNode.lastChild==_",link:"_.nodeName=='A'&&_.getAttribute('href')"},O=/^([ \t]*)(@?)((?:(["'\/])(?:\\?.)*?\4|[-\w\:.#\[\]=])+)[ \t]*(.*)$/gm,
S=/[;\s]*(\w+)(?:\s*\:((?:(["'\/])(?:\\?.)*?\3|[-,\s\w])*))?/g,T=f.bindings={"class":function(a,b,c,d){I.call(a,c,d.fn("_")(b))},html:function(a,b,c){a.innerHTML=c.format(b)},txt:function(a,b,c){a.txt(c.format(b))},val:function(a,b,c){a.val(c.format(b))}};w.El=f;e.append=q;e.after=function(a,b){q.call(a.parentNode,this,b?a:a.nextSibling);return this};e.to=function(a,b){q.call(a,this,b);return this};e.hasClass=y;e.addClass=z;e.rmClass=H;e.toggleClass=I;e.empty=function(){for(var a;a=this.firstChild;)J.call(a);
return this};e.kill=J;e.on=function(a,b){Event.add(this,a,b);return this};e.non=function(a,b){Event.remove(this,a,b);return this};e.attr=A;e.set=function(a,b,c){if(a)if("object"==typeof a)for(b in a)c=a[b],"class"==b?z.call(this,c):"string"==typeof c?A.call(this,b,c):c||this.removeAttribute(b);else q.call(this,a);return this};e.render=B;e.txt=function(a){return arguments.length?this[R]=a:this[R]};e.val=function(a){var b=this,c=b.type,d=b.options;if(arguments.length)return b.value=a;if("select-multiple"==
c){a=[];for(c=0;b=d[c++];)!b.selected||b.disabled||b.parentNode.disabled||a.push(b.value);return a}return"checkbox"!=c&&"radio"!=c||b.checked?b.value||options&&options[b.selectedIndex].value||"on":""};e.matches=e.matches||function(a){var b,c,d=a.replace(W,function(a,d,e,f,g){c=g+d.length;b=d.trim();return""}),e="+"==b?this.previousSibling:this.parentNode;return M(U(a.slice(c)))(this)?d?b?e&&e.matches&&e.matches(d)||!1:!!(e&&e.closest&&e.closest(d)):!0:!1};e.closest=e.closest||function(a){for(var b=
this;b;b=b.parentNode)if(b.matches&&b.matches(a))return b;return null};e.find="\v"!=="v"&&e.querySelector||function(a){return L(this,a,!0)};e.findAll=e.querySelectorAll?function(a){return new u(this.querySelectorAll(a))}:function(a){return new u(L(this,a))};f.wrap=u;u.prototype=Object.keys(e).reduce(function(a,b){a[b]=function(){for(var a=this._nodes,d=0,f=a.length;d<f;)e[b].apply(a[d++],arguments);return this};return a},{});e===f[x]&&(g.createElement=function(a){return C(K(a))},C(Q));f[x]=e;f.get=
function(a){"string"==typeof a&&(a=g.getElementById(a));return a&&a.to?a:C(a)};D._el=t;D._fn=p;f.cache=D;f.text=function(a){return g.createTextNode(a)};E.prototype.done=function(){f.cache(this.name,this.el.removeChild(this.el.firstChild),B);this.el.plugin=null;return this.parent};v.plugins={template:E};f.create=f.tpl=function(a){return v(a).render()};f.include=function(a,b,c){b=f.get(a);(new E(null,a)).el.append(f.tpl(b.innerHTML)).plugin.done();b.kill()};f.i18n=h;h.get=F;h.use=function(a){a=F(a);
r!=(r=a)&&(h[a]=h[a]||{});return g.documentElement.lang=a};h.add=P;h.def=function(a){Object.each(a,function(b,c){P(c,a)})}}(window,document,"prototype");
