!function(v,h,w){function E(a,b,c){for(var e=[],m=a.firstChild,d=F(b);b=m;){if(d(b)){if(c)return b;e.push(b)}for(m=b.firstChild||b.nextSibling;!m&&(b=b.parentNode)!==a;)m=b.nextSibling}return c?null:e}function F(a){return G[a]||(G[a]=Function("_,v,a,b","return "+a.split(R).map(function(a){var c,e,d=["_&&_.nodeType===1"],f=a.replace(S,function(a,b,d,m){e=m+b.length;c=b.trim();return""});(a=a.slice(e).replace(H,function(a,b,c,e,f,g,h){d.push("((v='"+(e||(h?g.slice(1,-1):g)||"").replace(/'/g,"\\'")+
"'),(a='"+c+"'),1)",I[":"==b?c:b]||"(a=_.getAttribute(a))"+(f?"&&"+I[f]:g?"==v":""));return""}))&&"*"!=a&&(d[0]+="&&_.nodeName=='"+a.toUpperCase()+"'");f&&d.push("+"==c?"(a=_.previousSibling)":"(a=_.parentNode)",(c?"a.matches&&a.matches('":"a.closest&&a.closest('")+f+"')");return d.join("&&")}).join("||")))}function f(a,b,c){var e,d={};a=a.replace(H,function(a,b,c,e,f,g,h){d["."==b?(d[b="class"]&&(c=d[b]+" "+c),b):"#"==b?"id":c]=h?g.slice(1,-1):g||c;return""})||"div";e=(r[a]||(r[a]=h.createElement(a))).cloneNode(!0).set(d);
return c?(n[a]&&e.setAttribute("data-call",a),e):n[a]&&n[a].call(e,b)||e.set(b)}function q(a,b){var c,e=0,d=typeof a;if(a){if("string"==d||"number"==d)a=f.text(a);else if(!("nodeType"in a)&&"length"in a){d=a.length;for(c=h.createDocumentFragment();e<d;)q.call(c,a[e++]);a=c}a.nodeType&&this.insertBefore(a,(!0===b?this.firstChild:"number"==typeof b?this.childNodes[0>b?this.childNodes.length-b-2:b]:b)||null);a.appendHook&&a.appendHook()}return this}function x(a){return-1<this.className.split(/\s+/).indexOf(a)}
function y(a){this.className+=this.className?x.call(this,a)?"":" "+a:a;return this}function J(a){this.className=(" "+this.className+" ").replace(" "+a+" "," ").trim();return this}function K(a,b){1==arguments.length&&(b=!x.call(this,a));return(b?y:J).call(this,a),b}function L(){this.parentNode&&this.parentNode.removeChild(this);Event.removeAll&&Event.removeAll(this);this.killHook&&this.killHook();this.empty&&this.empty();return this}function z(a,b){var c=this;if(1==arguments.length){if(a&&a.constructor===
Object){Object.each(a,function(a,b){z.call(c,b,a)});return}return c.getAttribute(a)}"id"!=a&&"name"!=a&&"type"!=a||"\v"!="v"?c.setAttribute(a,b):c.mergeAttributes(M("<INPUT "+a+'="'+b+'">'),!1)}function A(a,b){var c,e=this;if(c=!b&&e.getAttribute("data-call"))e.removeAttribute("data-call"),n[c].call(e);if(c=!b&&e.getAttribute("data-bind"))if(e.getAttribute("lang"),"{"==c.charAt(0)&&(c='txt:"'+c.replace(/"/g,'\\"')+'"'),c="n d p r->d&&("+c.replace(T,"(p['$1']?(r=p['$1'](n,d,$2)||r):(n['$1']=$2.format(d))),")+
"r)",Fn(c)(e,a,U))return e;for(e=e.firstChild;e;e=e.nextSibling)1==e.nodeType&&A.call(e,a);return this}function t(a){this._nodes=a}function B(a,b,c){r[a]="string"==typeof b?f(b):b;c&&(n[a]=c)}function u(a){function b(a,c,g,h,k,l){for(k=c.length;k<=d[0];)d.shift(),e=e.plugin?e.plugin.done():e.parentNode;g?u.plugins[h]?(e=(new u.plugins[h](e,l)).el,d.unshift(k)):e.append(f.text("text"==h?l:a)):(h&&(e=f(h,0,1).to(e),d.unshift(k)),l&&(k=l.charAt(0),">"==k?(c+" "+l.slice(1)).replace(N,b):"="==k?e.set({"data-bind":l.slice(1)}):
e.append(l.replace(/\\([=>:])/g,"$1"))))}var c=h.createDocumentFragment(),e=c,d=[-1];a.replace(N,b);c=c.childNodes;if(1==c.length)return c[0];d=[];for(e=c.length;e--;)d[e]=c[e];return d}function C(a,b){this.name=b;this.parent=a;this.el=f("div");this.el.plugin=this;return this}function g(a,b){b=g[D(b)];return b[a]||b[a=a.slice(a.indexOf(":")+1)||a]||a}function D(a){return a&&(g[a=a.toLowerCase()]||g[a=a.split("-")[0]])?a:p}function O(a,b){Object.merge(g[a]||(g[a]={}),b)}var p,P=h.body,M=h.createElement,
Q="textContent"in P?"textContent":"innerText",r={},n={},d=(v.HTMLElement||v.Element||f)[w],N=/^([ \t]*)(@?)((?:(["'\/])(?:\\?.)*?\4|[-\w\:.#\[\]=])+)[ \t]*(.*)$/gm,T=/[;\s]*(\w+)(?:\s*\:((?:(["'\/])(?:\\?.)*?\3|[-,\s\w])*))?/g,U=f.bindings={"class":function(a,b,c,d){K.call(a,c,d.fn("_")(b))},html:function(a,b,c){a.innerHTML=c.format(b)},txt:function(a,b,c){a.txt(c.format(b))},val:function(a,b,c){a.val(c.format(b))}},H=/([.#:[])([-\w]+)(?:\((.+?)\)|([~^$*|]?)=(("|')(?:\\?.)*?\6|[-\w]+))?]?/g,S=/([\s>+]*)(?:("|')(?:\\?.)*?\2|\(.+?\)|[^\s+>])+$/,
R=/\s*,\s*(?=(?:[^'"()]|"(?:\\?.)*?"|'(?:\\?.)*?'|\(.+?\))+$)/,G={},I={"first-child":"(a=_.parentNode)&&a.firstChild==_","last-child":"(a=_.parentNode)&&a.lastChild==_",".":"~_.className.split(/\\s+/).indexOf(a)","#":"_.id==a","^":"a.indexOf(v)==0","|":"a.split('-')[0]==v",$:"a.slice(-v.length)==v","~":"~a.split(/\\s+/).indexOf(v)","*":"~a.indexOf(v)"};v.El=f;d.append=q;d.after=function(a,b){q.call(a.parentNode,this,b?a:a.nextSibling);return this};d.to=function(a,b){q.call(a,this,b);return this};
d.hasClass=x;d.addClass=y;d.rmClass=J;d.toggleClass=K;d.empty=function(){for(var a;a=this.firstChild;)L.call(a);return this};d.kill=L;d.on=function(a,b){Event.add(this,a,b);return this};d.non=function(a,b){Event.remove(this,a,b);return this};d.attr=z;d.set=function(a,b,c){if(a)if("object"==typeof a)for(b in a)c=a[b],"class"==b?y.call(this,c):"string"==typeof c?z.call(this,b,c):c||this.removeAttribute(b);else q.call(this,a);return this};d.render=A;d.txt=function(a){return arguments.length?this[Q]=
a:this[Q]};d.val=function(a){var b=this,c=b.type,d=b.options;if(arguments.length)return b.value=a;if("select-multiple"==c){a=[];for(c=0;b=d[c++];)!b.selected||b.disabled||b.parentNode.disabled||a.push(b.value);return a}return"checkbox"!=c&&"radio"!=c||b.checked?b.value||options&&options[b.selectedIndex].value||"on":""};d.matches||(d.matches=function(a){return!!F(a)(this)});d.closest||(d.closest=function(a){for(var b=this;b;b=b.parentNode)if(b.matches&&b.matches(a))return b;return null});d.find="\v"!==
"v"&&d.querySelector||function(a){return E(this,a,!0)};d.findAll=d.querySelectorAll?function(a){return new t(this.querySelectorAll(a))}:function(a){return new t(E(this,a))};f.wrap=t;t.prototype=Object.keys(d).reduce(function(a,b){a[b]=function(){for(var a=this._nodes,e=0,f=a.length;e<f;)d[b].apply(a[e++],arguments);return this};return a},{});d===f[w]&&(h.createElement=function(a){return Object.merge(M(a),d)},Object.merge(P,d));f[w]=d;f.get=function(a){"string"==typeof a&&(a=h.getElementById(a));return a&&
a.to?a:Object.merge(a,d)};B._el=r;B._fn=n;f.cache=B;f.text=function(a){return h.createTextNode(a)};C.prototype.done=function(){f.cache(this.name,this.el.removeChild(this.el.firstChild),A);this.el.plugin=null;return this.parent};u.plugins={template:C};f.create=f.tpl=function(a){return u(a).render()};f.include=function(a,b,c){b=f.get(a);(new C(null,a)).el.append(f.tpl(b.innerHTML)).plugin.done();b.kill()};f.i18n=g;g.get=D;g.use=function(a){p!=(p=D(a))&&(g[p]=g[p]||{});return h.documentElement.lang=
p};g.add=O;g.def=function(a){Object.each(a,function(b,c){O(c,a)})}}(window,document,"prototype");
