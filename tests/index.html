<!DOCTYPE html>
<html><head>
	<meta name="viewport" content="initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" type="text/css" href="common.css">
</head>
<body>
<style>

.test1 {
  font-size: 1.5em;
}
</style>
<script src="../../_stable/browser-upgrade-lite/index.js"></script>
<script src="../../functional-lite/index.js"></script>
<script src="../index.js"></script>
<script src="../../browser-event-lite/index.js"></script>
<script src="../../date-format-lite/index.js"></script>
<script src="../../liquid-filters-lite/index.js"></script>
<script src="../../litejs/lib/form-to-json.js"></script>
<script src="../../litejs/lib/json-to-form.js"></script>
<script id="index" type="text/haml">

@template test
 .test
  a#button1.link1.link2[title=Link][href="#A link 1"] > b.bold1 > i.ital1 A Link 2
  a#button1.link1.link2[title='A Link 3'][href="#A"] A Link 4
  h3
   .div DIV
     .ok =if:"false"
       @text This text will not be visible
     .ok =if:"true"
       @text This text will be visible
   @same undefined plugin
   @text plain text

@template li-row
 li.row

@template ul3
	ul.ul3

@template form-test
 form[action="javascript:"][enctype="multipart/form-data"][method="post"]
  label
   b R1
   input[type=radio][name=r][value=1]
  label
   b R2
   input[type=radio][name=r][value=2]
  label
   b Arr
   input[name="map[key][]"]
   input[name="map[key][]"]
  label
   b Map
   input[name="map[a]"]
   input[name="map[b]"]
  input[type=submit]

@template ul2
	.list
		.begin each:["a", "b", "c"]
			.row
		ul.list =each:"users"
			li
				ul3
				.input =txt:"Hello <b>{name|upper}</b>"; title:name; class: "my-class", "i>1"
				.input =html:"Hello <b>{name|upper}</b>"
				input =value:"Hello {name|upper}"
		.end \= Static text
		.foot \> Static text
.index
</script>
<script>

/*
{% for i = 3; --i > 0; %}
{% for product in products take:5 %}
{% for product in products skip:5 %}
{% for item in ["a", "b", "c"] %}
{% for attr in deeper.not_found %}
{% for attr in deeper.object %}
   <ul data-bind2="foreach: months">

input: http://webdesignerwall.com/tutorials/cross-browser-html5-placeholder-text
*/

// http://stackoverflow.com/questions/3084675/internationalization-in-javascript
// http://stackoverflow.com/questions/9640630/javascript-i18n-internationalization-frameworks-libraries-for-client-side-use

	// Save node initial content for later use
	function getChilds(node) {
		var child
		, childs = node._childs
		if (!childs) {
			for (node._childs = childs = []; child = node.firstChild;) {
				childs.push(child);
				node.removeChild(child)
			}
		}
		return childs
	}

El.bindings.each = function(node, data, arr) {
	console.log("each", arguments)
	var childs = getChilds(node)
	arr = arr && data[arr] || data
	if (arr) node.empty().append(arr.map(function(obj) {
		return childs.map(renderClone, obj)
	}))
	function renderClone(el) {
		return el.cloneNode(true).render(this)
	}
	return node
}

El.include("index")


var template1 = El("ul2").to(document.body)
, users2 = [{i:1, name:"u"+new Date}, {i:2, name:"u2"}]

/*/
setInterval(function(){
	if (users.length > 2) users.length = 2
	else users.push({name:"u3"+new Date})
	template1.render({users:users})
}, 1400)
//*/

template1.render({users:users2})

</script>

</body>
<html>

